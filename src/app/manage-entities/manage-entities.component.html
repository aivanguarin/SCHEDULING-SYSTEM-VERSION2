<mat-tab-group class="mat-elevation-z1" [backgroundColor]="'primary'" value="Users">
  
  <!-- ======================================================================== -->

  <mat-tab label="Semesters" value="Semesters">
    <app-tab-template>
      <div side-title>
        Semesters
      </div>
      <div side-content>
        <div>&lt;search bar?&gt;</div>
        <button mat-button (click)="showNewUserPopup=true" class="gray-button">New</button>
      </div>
      <div main-title>
        Results
      </div>
      <div main-content>
        <table mat-table [dataSource]="semesterData" *ngIf="usersTableReady" class="mat-elevation-z1">
          <ng-container matColumnDef="id">
            <th mat-header-cell *matHeaderCellDef> # </th>
           <!-- <td mat-cell *matCellDef="let element"> {{element.id}} </td>  -->
           <td mat-cell *matCellDef="let element; let i = index">{{i + 1}}</td>
          </ng-container>
        
          <ng-container matColumnDef="school_year">
            <th mat-header-cell *matHeaderCellDef> SCH0OL YEAR </th>
            <td mat-cell *matCellDef="let element"> {{element.school_year}}</td> 
            
          </ng-container>
        
          <ng-container matColumnDef="semester">
            <th mat-header-cell *matHeaderCellDef> SEMESTER </th>
            <td mat-cell *matCellDef="let element"> {{element.semester}} </td>
          </ng-container>

          <ng-container matColumnDef="campus_director">
            <th mat-header-cell *matHeaderCellDef> CAMPUS DIRECTOR </th>
            <td mat-cell *matCellDef="let element"> {{element.campus_director}} </td>
          </ng-container>

          <ng-container matColumnDef="active">
            <th mat-header-cell *matHeaderCellDef> ACTIVE </th>
            <td mat-cell *matCellDef="let element"> {{element.is_active}} </td>
          </ng-container>

          <ng-container matColumnDef="default">
            <th mat-header-cell *matHeaderCellDef> DEFAULT </th>
            <td mat-cell *matCellDef="let element">
              <div *ngIf = "element.default === 1">Default</div>
            </td>
          </ng-container>
        
          <tr mat-header-row *matHeaderRowDef="semesterRowDef"></tr>
          <tr mat-row *matRowDef="let row; columns: semesterRowDef" (click)="rowClicked(row)" [matMenuTriggerFor]="menu"></tr>
          
          <mat-menu #menu="matMenu">
            <button mat-menu-item (click)="showEditUserPopup=true">Edit</button>
            <button mat-menu-item (click)="deleteUserProcess()">Delete</button>
          </mat-menu>
        </table>
        
        
      </div>
    </app-tab-template>
  </mat-tab>

  
  <!-- ======================================================================== -->
  
  <mat-tab label="Colleges" value="Colleges">
    <app-tab-template>
      <div side-title>
        Colleges
      </div>
      <div side-content>
        <div>&lt;search bar?&gt;</div>
        <button mat-button (click)="showNewUserPopup=true" class="gray-button">New</button>
      </div>
      <div main-title>
        Results
      </div>
      <div main-content>
        <table mat-table [dataSource]="collegeData" *ngIf="usersTableReady" class="mat-elevation-z1">
          <ng-container matColumnDef="id">
            <th mat-header-cell *matHeaderCellDef> # </th>
           <!-- <td mat-cell *matCellDef="let element"> {{element.id}} </td>  -->
           <td mat-cell *matCellDef="let element; let i = index">{{i + 1}}</td>
          </ng-container>
        
          <ng-container matColumnDef="college_code">
            <th mat-header-cell *matHeaderCellDef> COLLEGE CODE </th>
            <td mat-cell *matCellDef="let element"> {{element.college_code}}</td> 
            
          </ng-container>
        
          <ng-container matColumnDef="college_name">
            <th mat-header-cell *matHeaderCellDef> NAME </th>
            <td mat-cell *matCellDef="let element"> {{element.college_name}} </td>
          </ng-container>

          <ng-container matColumnDef="active">
            <th mat-header-cell *matHeaderCellDef> ACTIVE </th>
            <td mat-cell *matCellDef="let element"> {{element.is_active}} </td>
          </ng-container>
        
          <tr mat-header-row *matHeaderRowDef="collegeRowDef"></tr>
          <tr mat-row *matRowDef="let row; columns: collegeRowDef" (click)="rowClicked(row)" [matMenuTriggerFor]="menu"></tr>
          
          <mat-menu #menu="matMenu">
            <button mat-menu-item (click)="showEditUserPopup=true">Edit</button>
            <button mat-menu-item (click)="deleteUserProcess()">Delete</button>
          </mat-menu>
        </table>
        
        
      </div>
    </app-tab-template>
  </mat-tab>

  
  
  <!-- ======================================================================== -->
  
  <mat-tab label="Course" value="Courses">
    <app-tab-template>
      <div side-title>
        Courses
      </div>
      <div side-content>
        <div>&lt;search bar?&gt;</div>
        <button mat-button (click)="showNewUserPopup=true" class="gray-button">New</button>
      </div>
      <div main-title>
        Results
      </div>
      <div main-content>
        <table mat-table [dataSource]="courseData" *ngIf="usersTableReady" class="mat-elevation-z1">
          <ng-container matColumnDef="id">
            <th mat-header-cell *matHeaderCellDef> # </th>
           <!-- <td mat-cell *matCellDef="let element"> {{element.id}} </td>  -->
           <td mat-cell *matCellDef="let element; let i = index">{{i + 1}}</td>
          </ng-container>
        
          <ng-container matColumnDef="course_code">
            <th mat-header-cell *matHeaderCellDef> COURSE CODE </th>
            <td mat-cell *matCellDef="let element"> {{element.course_code}}</td> 
            
          </ng-container>
        
          <ng-container matColumnDef="course_name">
            <th mat-header-cell *matHeaderCellDef> NAME</th>
            <td mat-cell *matCellDef="let element"> {{element.course_name}} </td>
          </ng-container>

          <ng-container matColumnDef="active">
            <th mat-header-cell *matHeaderCellDef> ACTIVE </th>
            <td mat-cell *matCellDef="let element"> {{element.is_active}} </td>
          </ng-container>
        
          <tr mat-header-row *matHeaderRowDef="coursesRowDef"></tr>
          <tr mat-row *matRowDef="let row; columns: coursesRowDef" (click)="rowClicked(row)" [matMenuTriggerFor]="menu"></tr>
          
          <mat-menu #menu="matMenu">
            <button mat-menu-item (click)="showEditUserPopup=true">Edit</button>
            <button mat-menu-item (click)="deleteUserProcess()">Delete</button>
          </mat-menu>
        </table>
        
        
      </div>
    </app-tab-template>
  </mat-tab>

  

  <!-- ======================================================================== -->
  
  <mat-tab label="Subjects" value="Subjects">
    <app-tab-template>
      <div side-title>
        Subjects
      </div>
      <div side-content>
        <div>&lt;search bar?&gt;</div>
        <button mat-button (click)="showNewUserPopup=true" class="gray-button">New</button>
      </div>
      <div main-title>
        Results
      </div>
      <div main-content>
        <table mat-table [dataSource]="subjectsData" *ngIf="usersTableReady" class="mat-elevation-z1">
          <ng-container matColumnDef="id">
            <th mat-header-cell *matHeaderCellDef> # </th>
           <!-- <td mat-cell *matCellDef="let element"> {{element.id}} </td>  -->
           <td mat-cell *matCellDef="let element; let i = index">{{i + 1}}</td>
          </ng-container>
        
          <ng-container matColumnDef="subject_code">
            <th mat-header-cell *matHeaderCellDef> SUBJECT CODE </th>
            <td mat-cell *matCellDef="let element"> {{element.subject_code}}</td> 
            
          </ng-container>
        
          <ng-container matColumnDef="description">
            <th mat-header-cell *matHeaderCellDef> DESCRIPTION </th>
            <td mat-cell *matCellDef="let element"> {{element.description}} </td>
          </ng-container>

          <ng-container matColumnDef="active">
            <th mat-header-cell *matHeaderCellDef> ACTIVE </th>
            <td mat-cell *matCellDef="let element"> {{element.is_active}} </td>
          </ng-container>
        
          <tr mat-header-row *matHeaderRowDef="subjectsRowDef"></tr>
          <tr mat-row *matRowDef="let row; columns: subjectsRowDef" (click)="rowClicked(row)" [matMenuTriggerFor]="menu"></tr>
          
          <mat-menu #menu="matMenu">
            <button mat-menu-item (click)="showEditUserPopup=true">Edit</button>
            <button mat-menu-item (click)="deleteUserProcess()">Delete</button>
          </mat-menu>
        </table>
        
        
      </div>
    </app-tab-template>
  </mat-tab>

  

  <!-- ======================================================================== -->
  
  <mat-tab label="Rooms" value="Rooms">
    <app-tab-template>
      <div side-title>
        Rooms
      </div>
      <div side-content>
        <div>&lt;search bar?&gt;</div>
        <button mat-button (click)="showNewUserPopup=true" class="gray-button">New</button>
      </div>
      <div main-title>
        Results
      </div>
      <div main-content>
        <table mat-table [dataSource]="roomsData" *ngIf="usersTableReady" class="mat-elevation-z1">
          <ng-container matColumnDef="id">
            <th mat-header-cell *matHeaderCellDef> # </th>
           <!-- <td mat-cell *matCellDef="let element"> {{element.id}} </td>  -->
           <td mat-cell *matCellDef="let element; let i = index">{{i + 1}}</td>
          </ng-container>
        
          <ng-container matColumnDef="room_code">
            <th mat-header-cell *matHeaderCellDef> ROOM CODE </th>
            <td mat-cell *matCellDef="let element"> {{element.room_code}}</td> 
            
          </ng-container>
        
          <ng-container matColumnDef="description">
            <th mat-header-cell *matHeaderCellDef> DESCRIPTION </th>
            <td mat-cell *matCellDef="let element"> {{element.description}} </td>
          </ng-container>

          <ng-container matColumnDef="type">
            <th mat-header-cell *matHeaderCellDef> TYPE </th>
            <td mat-cell *matCellDef="let element"> {{element.type}} </td>
          </ng-container>

          <ng-container matColumnDef="active">
            <th mat-header-cell *matHeaderCellDef> ACTIVE </th>
            <td mat-cell *matCellDef="let element"> {{element.is_active}} </td>
          </ng-container>
        
          <tr mat-header-row *matHeaderRowDef="roomsRowDef"></tr>
          <tr mat-row *matRowDef="let row; columns: roomsRowDef" (click)="rowClicked(row)" [matMenuTriggerFor]="menu"></tr>
          
          <mat-menu #menu="matMenu">
            <button mat-menu-item (click)="showEditUserPopup=true">Edit</button>
            <button mat-menu-item (click)="deleteUserProcess()">Delete</button>
          </mat-menu>
        </table>
        
        
      </div>
    </app-tab-template>
  </mat-tab>

  
  <!-- ======================================================================== -->
  
      <mat-tab label="Employees" value="Employees">
        <app-tab-template>
          <div side-title>
            Employees
          </div>
          <div side-content>
            <div>&lt;search bar?&gt;</div>
            <button mat-button (click)="showNewUserPopup=true" class="gray-button">New</button>
          </div>
          <div main-title>
            Results
          </div>
          <div main-content>
            <table mat-table [dataSource]="instructorsData" *ngIf="usersTableReady" class="mat-elevation-z1">
              <ng-container matColumnDef="id">
                <th mat-header-cell *matHeaderCellDef> # </th>
               <!-- <td mat-cell *matCellDef="let element"> {{element.id}} </td>  -->
               <td mat-cell *matCellDef="let element; let i = index">{{i + 1}}</td>
              </ng-container>
            
              <ng-container matColumnDef="name">
                <th mat-header-cell *matHeaderCellDef> NAME </th>
                <td mat-cell *matCellDef="let element"> {{(element.last_name + "," + " " + element.first_name)}}</td> 
                
              </ng-container>
            
              <ng-container matColumnDef="username">
                <th mat-header-cell *matHeaderCellDef> USERNAME </th>
                <td mat-cell *matCellDef="let element"> {{element.username}} </td>
              </ng-container>

              <ng-container matColumnDef="role">
                <th mat-header-cell *matHeaderCellDef> ROLE </th>
               <!-- <td mat-cell *matCellDef="let element"> {{element.is_active}} </td> -->
               <td mat-cell *matCellDef="let element">ADMIN</td>
              </ng-container>
            

              <ng-container matColumnDef="active">
                <th mat-header-cell *matHeaderCellDef> ACTIVE </th>
               <!-- <td mat-cell *matCellDef="let element"> {{element.is_active}} </td> -->
               <td mat-cell *matCellDef="let element"></td>
              </ng-container>
            
              <tr mat-header-row *matHeaderRowDef="instructorsRowDef"></tr>
              <tr mat-row *matRowDef="let row; columns:instructorsRowDef" (click)="rowClicked(row)" [matMenuTriggerFor]="menu"></tr>
              
              <mat-menu #menu="matMenu">
                <button mat-menu-item (click)="showEditUserPopup=true">Edit</button>
                <button mat-menu-item (click)="deleteUserProcess()">Delete</button>
              </mat-menu>
            </table>    
          </div>
        </app-tab-template>
      </mat-tab>

  <!-- ======================================================================== -->
  
    <mat-tab label="Users" value="Users">
      <app-tab-template>
        <div side-title>
          Users
        </div>
        <div side-content>
          <div>&lt;search bar?&gt;</div>
          <button mat-button (click)="showNewUserPopup=true" class="gray-button">New</button>
        </div>
        <div main-title>
          Results
        </div>
        <div main-content>
          <table mat-table [dataSource]="usersData" *ngIf="usersTableReady" class="mat-elevation-z1">
            <ng-container matColumnDef="id">
              <th mat-header-cell *matHeaderCellDef> # </th>
             <!-- <td mat-cell *matCellDef="let element"> {{element.id}} </td>  -->
             <td mat-cell *matCellDef="let element; let i = index">{{i + 1}}</td>
            </ng-container>
          
            <ng-container matColumnDef="name">
              <th mat-header-cell *matHeaderCellDef> NAME </th>
              <td mat-cell *matCellDef="let element"> {{instructorNameUtil(element.id)}}</td> 
              
            </ng-container>
          
            <ng-container matColumnDef="username">
              <th mat-header-cell *matHeaderCellDef> USERNAME </th>
              <td mat-cell *matCellDef="let element"> {{element.username}} </td>
            </ng-container>

            <ng-container matColumnDef="active">
              <th mat-header-cell *matHeaderCellDef> ACTIVE </th>
              <td mat-cell *matCellDef="let element"> {{element.is_active}} </td>
            </ng-container>
          
            <tr mat-header-row *matHeaderRowDef="usersRowDef"></tr>
            <tr mat-row *matRowDef="let row; columns: usersRowDef" (click)="rowClicked(row)" [matMenuTriggerFor]="menu"></tr>
            
            <mat-menu #menu="matMenu">
              <button mat-menu-item (click)="showEditUserPopup=true">Edit</button>
              <button mat-menu-item (click)="deleteUserProcess()">Delete</button>
            </mat-menu>
          </table>
          
          
        </div>
      </app-tab-template>
    </mat-tab>

  <!-- ======================================================================== -->
  
  </mat-tab-group>

  <!-- ======================================================================== -->
  <!-- ======================================================================== -->
  <!-- ======================================================================== -->

  <div *ngIf="showNewUserPopup" class="popup-wrapper">
    <div (click)="showNewUserPopup=!showNewUserPopup" class="popup-backdrop">

    </div>
    
    <mat-card class="popup">
      <mat-toolbar color="'primary'">
        New User
      </mat-toolbar>
      
      <form fxLayoutAlign="stretch" fxLayout="column" class="login-form" [formGroup]="newUserForm" (ngSubmit)="newUserProcess()">
        <div fxLayoutAlign="stretch" fxLayout="row">
          <div fxLayout="column">
            <mat-form-field>
              <input matInput maxlength="20" placeholder="Last Name" formControlName="last_name">
            </mat-form-field>
          </div>
          <div fxLayout="column">
            <mat-form-field>
              <input matInput maxlength="20" placeholder="First Name" formControlName="first_name">
            </mat-form-field>
          </div>
          <div fxLayout="column">
            <mat-form-field>
              <input matInput maxlength="20" placeholder="Middle Name" formControlName="middle_name">
            </mat-form-field>
          </div>
        </div>

        <div fxLayout="row">
          <div fxLayout="column">
            <mat-form-field>
              <input matInput maxlength="5" placeholder="Name Suffix" formControlName="suffix_name">
            </mat-form-field>
          </div>
          <div fxLayout="column">
            <mat-form-field>
              <mat-label>Salutation</mat-label>
                <mat-select formControlName="salutation">
                  <mat-option [value]="'mr'">Mr.</mat-option>
                  <mat-option [value]="'ms'">Ms.</mat-option>
                </mat-select>
              
            </mat-form-field>
          </div>
          <div fxLayout="column">
            <mat-form-field>
              <mat-label>Sex</mat-label>
                <mat-select formControlName="sex">
                  <mat-option [value]="'m'">Male</mat-option>
                  <mat-option [value]="'f'">Female</mat-option>
                </mat-select>
            </mat-form-field>
          </div>
        </div>

        <div fxLayout="row">
          <div fxLayout="column">
            <mat-form-field>
              <input matInput maxlength="8" placeholder="College" formControlName="college_id">
            </mat-form-field>
          </div>
          <div fxLayout="column">
            <mat-form-field>
              <input matInput maxlength="8" placeholder="Course" formControlName="course_id">
            </mat-form-field>
          </div>
        </div>

        <div fxLayout="row">
          <div fxLayout="column">
            <mat-form-field>
              <input matInput maxlength="8" placeholder="Max Load" formControlName="max_load">
            </mat-form-field>
          </div>
          <!--
          <div fxLayout="column">
            <mat-form-field>
              <input matInput maxlength="20" placeholder="Admin Function" formControlName="admin_function">
            </mat-form-field>
          </div>  -->

          <!--FOR CHECKBOX RETURNS BOOLEAN  -->
          <div fxLayout="column">
              <mat-checkbox formControlName="admin_function">Admin Function</mat-checkbox>    
          </div>

          <div fxLayout="column">
            <mat-form-field>
              <input matInput type="number" maxlength="8" placeholder="Admin Hours" formControlName="admin_hrs">
            </mat-form-field>
          </div>
        </div>

        <mat-checkbox formControlName="is_active">Active</mat-checkbox>

        <div fxLayout="row">
          <mat-form-field>
            <input matInput maxlength="20" placeholder="Username" formControlName="username">
          </mat-form-field>
        </div>

        <div fxLayout="row">
          <mat-form-field>
            <input matInput type="password" placeholder="Password" formControlName="password">
          </mat-form-field>
        </div>

        <br>
        <button mat-raised-button type="submit">Submit</button>
      </form>
    </mat-card>
  </div>

  <!-- ======================================================================== -->

  <div *ngIf="showEditUserPopup" class="popup-wrapper">
    <div (click)="showEditUserPopup=!showEditUserPopup" class="popup-backdrop">

    </div>
    
    <mat-card class="popup">
      <mat-toolbar color="'primary'">
        Edit User
      </mat-toolbar>
      
      <form fxLayoutAlign="stretch" fxLayout="column" class="login-form" [formGroup]="editUserForm" (ngSubmit)="editUserProcess()">
        <mat-form-field>
          <input matInput maxlength="20" placeholder="First Name" formControlName="first_name">
        </mat-form-field>
        <mat-form-field>
          <input matInput maxlength="20" placeholder="Middle Name" formControlName="middle_name">
        </mat-form-field>
        <mat-form-field>
          <input matInput maxlength="20" placeholder="Last Name" formControlName="last_name">
        </mat-form-field>
        <mat-form-field>
          <input matInput maxlength="20" placeholder="Username" formControlName="username">
        </mat-form-field>
        <mat-form-field>
          <input matInput type="password" placeholder="Password" formControlName="password">
        </mat-form-field>
        <br>
        <button mat-raised-button type="submit">Submit</button>
      </form>
    </mat-card>
  </div>
